@import url('https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap');

/* =========================================
   VARIABLES & CONFIGURATION
   ========================================= */
:root {
  --white-900: hsl(0, 0%, 100%); /* --neutral-off-white */
  --black-900: hsl(0, 0%, 0%);
  --grey-200: hsl(0, 0%, 85%);
  --grey-300: hsl(233, 8%, 79%);
  --navy-600: hsl(236, 13%, 42%);
  --navy-950: hsl(240, 100%, 5%); /* --neutral-very-dark-blue */
  --gold-400: hsl(35, 77%, 62%);
  --red-500: hsl(4, 85%, 63%); /* --primary-soft-red */

  --spacing-100: 0.5rem;
  --spacing-200: 1rem;
  --spacing-300: 1.5rem; /* 24px */
  --spacing-500: 2.5rem; /* 40px */
  --spacing-800: 4rem; /* 64px */
  --spacing-1100: 5.5rem; /* 88px */

  /* Z-Index Layering */
  --z-overlay: 500;
  --z-menu: 1000;
  --z-toggle: 9999;
}

/* =========================================
   RESET CSS (Base)
   ========================================= */

html {
  box-sizing: border-box;
  font-size: 100%;
  /* Active le défilement fluide pour les liens d'ancrage (ex: retour en haut) */
  scroll-behavior: smooth;
  scrollbar-gutter: stable;
  /* Empêche le zoom automatique du texte sur iOS en mode paysage */
  -webkit-text-size-adjust: 100%;
}

*,
*::before,
*::after {
  box-sizing: inherit;
}

body {
  margin: 0;
  background-color: var(--white-900);
  color: var(--navy-950);
  font-family: 'Inter', sans-serif;
  font-size: 1rem;
  font-weight: 400;
  line-height: 1;
  /* Améliore le kerning (l'espace entre les lettres) et les ligatures */
  /* Attention : Peut être lourd sur des pages avec énormément de texte */
  text-rendering: optimizeLegibility;
  /* text-rendering: geometricPrecision; */
  /* Lissage des polices (Rend le texte plus fin sur Mac) */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  overflow-x: hidden;
}

img,
picture,
video,
iframe {
  max-inline-size: 100%;
  block-size: auto;
  display: block;
}

h1, h2, h3, h4, h5, h6, p, ul, ol, figure {
  margin: 0;
  padding: 0;
}

ul, ol {
  list-style: none;
}

a {
  text-decoration: none;
  color: inherit;
  transition: color 0.3s ease-out;
}

/* =========================================
   FORM ELEMENT RESET
   ========================================= 
*/

input,
button,
select,
textarea {
  padding: 0;
  margin: 0;
  font: inherit;
  color: inherit;
  letter-spacing: inherit;
  line-height: inherit;
  background: none;
  border: none;
  border-radius: 0;
  box-sizing: border-box;
  outline: none;
}

button {
  cursor: pointer;
}

/* Gestion Accessibilité Focus */
:focus-visible {
  outline: 2px solid var(--red-500);
  outline-offset: 2px;
}

:focus:not(:focus-visible) {
  outline: none;
}

::selection {
  background-color: var(--gold-400);
  color: var(--white-900-);
}


/* UTILITIES */

.visually-hidden,
.sr-only {
  position: absolute;
  inline-size: 1px;
  block-size: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0 0 0 0);
  white-space: nowrap;
  border: 0;
}

.noscroll {
  overflow: hidden;
}

/* =========================================
   LAYOUT GLOBAL
   ========================================= */
.layout {
  padding: 1.75rem 1rem 5rem;
  inline-size: 100%;
  display: flex;
  flex-direction: column;
  min-block-size: 100dvh;
}

.primary-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.primary-header__logo {
  inline-size: 2.8125rem; /* 45px */
  block-size: 1.75rem;
  /* On s'assure qu'il ne s'écrase jamais */
  flex-shrink: 0; 
  /* On le rend bloc pour éviter les bugs d'alignement inline */
  display: block;
}

.primary-header__logo img {
  inline-size: 100%;
  block-size: 100%;
  object-fit: contain; /* Sécurité pour ne pas déformer le ratio */
}

/* =========================================
   COMPOSANT : NAV TOGGLE (Hamburger)
   ========================================= */
/* --- CONFIGURATION DU BOUTON (Block) --- */
/* Correspond à <button class="nav-toggle"> */
.nav-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative; /* Dans le flux */
  z-index: var(--z-toggle); /* Toujours au-dessus du menu */

  inline-size: 2.5rem;
  block-size: 1.0625rem;

  margin-inline-start: auto; /* Push à droite */
  border: none;
  background: transparent;
  padding: 0;
  line-height: 0;
  cursor: pointer;
}

/* --- L'ÉTAT OUVERT (FIXED) --- */
/* Quand le menu est ouvert, la croix doit se fixer par rapport à l'écran */
/* pour ne plus dépendre du centrage du .layout */
.nav-toggle[aria-expanded="true"] {
  position: fixed;
  z-index: 9999; /* Toujours au-dessus de tout */
  
  /* top: 1.75rem; /* /* Identique au padding-top du layout NON */
  right: 1rem; /* Identique au padding-right du layout mobile */
}

/* --- LE DESSIN DU HAMBURGER (Element: Box) --- */
/* Correspond à <span class="nav-toggle__box"> */
.nav-toggle__box {
  inline-size: 2.5rem;
  block-size: 1.0625rem;
  display: inline-block;
  position: relative;
  vertical-align: middle; /* <- Parfois utile pour affiner le pixel perfect */
}

/* --- LES BARRES (Element: Inner) --- */
/* Correspond à <span class="nav-toggle__inner"> et ses pseudo-éléments */

/* Dessin Burger */
/* 1. Les propriétés communes aux 3 barres (DRY) */
.nav-toggle__inner,
.nav-toggle__inner::before,
.nav-toggle__inner::after {
  position: absolute;
  inline-size: 100%;
  block-size: 3px;
  background-color: var(--navy-950);
  left: 0;
  transition: transform 0.3s ease-in-out, background-color 0.3s ease-in-out;
}

/* 2. La barre du milieu (L'élément réel) */
.nav-toggle__inner {
  top: 50%;
  transform: translateY(-50%);
}

/* 3. La barre du haut (Pseudo-élément) */
.nav-toggle__inner::before {
  content: '';
  top: -7px;
}

/* 4. La barre du bas (Pseudo-élément) */
.nav-toggle__inner::after {
  content: '';
  bottom: -7px; /* part vers le bas depuis le bas de la barre centrale */
  /* bottom ici au lieu de top positif => c'est plus propre, mais top: 10px marche aussi */
}

/* --- ANIMATION "CROIX" (State) --- */
/* Quand le bouton a l'attribut aria-expanded="true" */

/* Barre du milieu -> devient transparente */
.nav-toggle[aria-expanded="true"] .nav-toggle__inner {
  background-color: transparent;
}

/* Barre du haut -> descend et tourne */
.nav-toggle[aria-expanded="true"] .nav-toggle__inner::before {
  top: 0;
  transform: rotate(45deg);
}

/* Barre du bas -> monte et tourne */
.nav-toggle[aria-expanded="true"] .nav-toggle__inner::after {
  bottom: 0; /* Ou top: 0 si top utilisé plus haut */
  transform: rotate(-45deg);
}

/* =========================================
COMPOSANT : PRIMARY NAVIGATION DRAWER (Comportement Mobile)
========================================= */
/* Style par défaut (Mobile - Drawer) */
/* Par défaut (Mobile), le menu est caché */
.primary-navigation {
  /* On utilise fixed pour que le menu reste là même si on scrolle */
  position: fixed; 
  z-index: var(--z-menu); /* Juste en dessous du bouton burger (qui sera 9999) */
  inset: 0 0 0 auto; /* top right bottom left (laisse 30% d'espace à gauche) = Collé à droite */

  /* Largeur Mobile */
  inline-size: 68.3%; /* (cible = 256px / contexte = 375px) x 100 */
  max-inline-size: 16rem; /* Dès que 68% dépasse 256px, c'est 256px qui gagne */
  
  /* Positionnement : Collé à droite, en haut, pleine hauteur */
  /* background-color: hsl(0deg 0% 100% / 90%); /* Blanc cassé transparent */
  background-color: var(--white-900); /* Fallback solide si tu préfères */
  background-color: hsl(0 0% 100% / 0.75);
  backdrop-filter: blur(1rem); 
    -webkit-backdrop-filter: blur(1rem); /* Pour Safari */
  
  /* Padding vertical calculé (Layout + Croix + Espace) */
  /* Calcul : Layout Pad (1.75rem) + Croix (17px) + Espace (88px) */
  /* 1.75rem approx 28px. Total = 133px */
  padding-block-start: calc(1.75rem + 17px + 5.5rem); /* seule la croix reste en px */
  padding-inline: 1.5rem;
  
  /* Animation du tiroir */
  /* On le déplace à 100% vers la droite (hors écran) */
  transform: translateX(100%);
  transition: transform 350ms ease-out, visibility 350ms ease-out;
  /* AJOUT A11Y : On le cache complètement au clavier quand il est fermé */
  visibility: hidden;
}

/* --- L'état OUVERT (piloté par JS) --- */
/* Quand le JS ajoute data-visible="true" sur la balise <nav> */
.primary-navigation[data-visible="true"] {
  transform: translateX(0%); /* Le menu revient à sa place */
  /* AJOUT A11Y : On le rend visible */
  visibility: visible;
}

/* Style de la liste à l'intérieur (pour aérer les liens) */
.primary-navigation__list {
  display: flex;
  flex-direction: column;
  gap: 1.5rem; /* Espace entre les liens */
}

.primary-navigation__link {
  color: var(--navy-950);
  font-size: 1.125rem;
  line-height: 22px;
  display: block; /* Agrandit la zone de clic */
}

.primary-navigation__link:hover {
  color: var(--red-500);
}

/* =========================================
   OVERLAY (Fond sombre)
   ========================================= */
.overlay {
  position: fixed;
  inset: 0; /* Prend tout l'écran */
  background-image: linear-gradient(rgb(0 0 0 / 0), rgb(0 0 0 / 0.8));
  z-index: var(--z-overlay); /* Derrière le menu (1000) mais devant le site */
  
  /* État caché par défaut (pour l'animation) */
  opacity: 0;
  visibility: hidden; 
  transition: opacity 350ms ease-out, visibility 350ms ease-out;
}

/* Quand le menu est ouvert, l'overlay apparaît */
/* On cible l'overlay via une classe ajoutée par JS ou un selecteur frere */
/* NOTE: Le plus simple ici est d'ajouter data-overlay="true" sur l'overlay via JS */
.overlay[data-visible="true"] {
  opacity: 1;
  visibility: visible;
}

/* =========================================
   FEATURED ARTICLE (Hero)
   ========================================= */
.featured-article {
  margin-block-start: 2rem;
}

/* Règle universelle pour toutes les images dans picture */
.featured-article__image {
  inline-size: 100%; /* S'adapte à la largeur de l'écran - Prend toute la place dispo... */
  /* max-inline-size: 608px;  /* ...mais s'arrête net à 608px */
  block-size: 18.75rem; /* La contrainte FIXE */
  /* height: auto;      /* (ou 300px selon ton choix précédent, mais auto est mieux ici) */
  object-fit: cover; /* Ligne la plus importante: sécurité si tu fixes une height plus tard */
  /* object-position: center; /* Optionnel : Centre l'image si elle est rognée */
}

/* Par défaut: Layout empilé (Grid 1 colonne) */
.featured-article__content {
  margin-block-start: 1.5rem;
  display: grid;
  gap: 1.5rem;
}

.featured-article__title {
  font-size: 2.5rem;
  font-weight: 800;
  line-height: 1;
}

.featured-article__description {
  display: flex;
  flex-direction: column;
  align-items: flex-start; /* Pour que le bouton ne prenne pas toute la largeur */
  gap: 1.5rem; /* Espace entre le paragraphe et le bouton */
}

.featured-article__text {
  /* padding-inline-end: 3rem; */
  /* Idéal pour l'œil humain: 50ch */
  max-inline-size: 60ch; 
  /* Optionnel : éviter les lignes "veuves" (orphelines) */
  text-wrap: pretty;
  font-size: 0.9375rem;
  color: var(--navy-600);
  line-height: 26px;
}

.button {
  display: inline-block;
  color: var(--navy-950);
  background-color: var(--red-500);
  padding: 0.5rem 2rem;
  font-size: 0.875rem;
  font-weight: 700;
  line-height: 32px;
  letter-spacing: 4px;
  text-transform: uppercase;
  transition: color 0.3s ease-out, background-color 0.3s ease-out;
}

.button:hover,
.button:active {
  color: var(--white-900);
  background-color: var(--navy-950);
}

/* =========================================
   NEWS (Sidebar)
   ========================================= */
.new-news {
  padding: 1.5rem;
  margin-block-start: 4rem;
  color: var(--white-900);
  background-color: var(--navy-950);
}

.new-news__title {
  color: var(--gold-400);
  font-size: 2rem;
  font-weight: 700;
  line-height: 32px;
}

.new-news__item {
  padding-block: 2rem;
  border-bottom: 1px solid var(--navy-600); /* border-block-end (experimental) */
}

.new-news__item:last-child {
  border-bottom: none;
  /* padding-block-end: 0; */
  padding-bottom: 0;
}

.new-news__headline a {
  font-size: 1.25rem;
  font-weight: 700;
  line-height: 24px;
}

.new-news__headline a:hover,
.new-news__headline a:active {
  color: var(--gold-400);
}

.new-news__excerpt {
  padding-block-start: 0.5rem;
  color: var(--grey-300);
  font-size: 0.9375rem;
  font-weight: 400;
  line-height: 26px;
  letter-spacing: -0.2px;
}

/* =========================================
   TOP ARTICLES (Footer List)
   ========================================= */
.top-articles {
  margin-block-start: 4rem;
}

.top-articles__list {
  display: flex;
  flex-direction: column;
  gap: 2rem;
}

.top-articles__item {
  display: flex;
  align-items: flex-start; /* Sécurité : aligne l'image en haut si le texte est long */
  gap: 1.5rem;
}

.top-articles__item img {
  inline-size: 6.25rem;
  block-size: 8.0625rem;
  object-fit: cover; /* Indispensable : Empêche la déformation */
  flex-shrink: 0;    /* Indispensable : Empêche l'image de rétrécir si l'écran est petit */
}

.top-articles__content {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.top-articles__rank {
  color: var(--red-500);
  font-size: 2rem;
  font-weight: 700;
  line-height: 32px;
  letter-spacing: 0.7px;
}

.top-articles__headline a {
  color: var(--navy-950);
  font-size: 1.125rem;
  font-weight: 800;
  line-height: 24px;
  letter-spacing: -0.2px;
}

.top-articles__headline a:hover,
.top-articles__headline a:active {
  color: var(--red-500);
}

.top-articles__excerpt {
  color: var(--navy-600);
  font-size: 0.9375rem;
  font-weight: 400;
  line-height: 26px;
}

/* PATCH : Alignement de la croix quand le layout mobile est centré (640px - 768px) */
/* Dès que l'écran dépasse la largeur du contenu mobile + les marges */
/* @media (min-width: 40em) and (max-width: 47.99em) { */
  /* .nav-toggle[aria-expanded="true"] { */
    /* Calcul dynamique pour rester aligné avec le contenu centré */
    /* (Largeur Écran - Largeur Contenu) / 2 + Padding Contenu */
    /* right: calc((100vw - 608px) / 2 + 1rem); */
  /* } */
/* } */

/* =========================================
   MEDIA QUERIES (BREAKPOINTS)
   ========================================= */

/* -------------------------------------------
   TABLETTE (Entre 768px et 1440px)
   ------------------------------------------- */

@media (48em <= width < 64em) {
  .layout {
    /* 1. On autorise le site à grandir */
    inline-size: 100%;
    max-inline-size: 69.5rem; /* La limite max du desktop */
    
    /* 2. On centre */
    margin-inline: auto;
    
    /* 3. LE RÉGLAGE FIN : 4.5rem au lieu de 5rem */
    /* Sur Windows à 768px, ça donnera pile 608px de contenu */
    /* Sur Mac ou écrans plus larges, ça s'agrandira proprement */
    padding: 1.75rem 4.5rem 5rem 4.5rem;
  }
  
  /* L'image suivra la largeur disponible (608px minimum) */
  .featured-article__image {
    inline-size: 100%;
    block-size: 18.75rem;
    object-fit: cover;
  }

  /* Tablette : On centre le site + ajout paddings */
  /* padding: 1.75rem 5rem 5rem 5rem;
  margin-inline: auto;
  max-inline-size: 1112px; On débloque la largeur - Important pour écraser le 608px du mobile */

  /* Reset Navigation (Mode Horizontal) */
  .nav-toggle, 
  .overlay { 
    display: none; 
  }

  /* On reset le menu pour qu'il s'affiche en ligne */
  .primary-navigation {
    position: static; 
    transform: none; 
    transition: none;
    padding: 0; 
    inset: auto; 
    background: transparent;
    inline-size: auto; 
    max-inline-size: none;
    backdrop-filter: none;
    visibility: visible;
  }

  .primary-navigation__list {
    flex-direction: row; 
    gap: 1.5rem; /* Un peu moins espacé que sur Desktop (2.5rem) pour que ça tienne */
  }
  
  /* Spécificité forcée pour écraser le style mobile */
  .primary-navigation__item .primary-navigation__link {
    font-size: 0.92rem; /* Plus petit pour assurer que ça rentre */
    color: var(--navy-600);
  }

  .primary-navigation__item .primary-navigation__link:hover {
    color: var(--red-500);
  }
  
  .featured-article__image {
    inline-size: 100%; /* Prend toute la largeur */
    block-size: 18.75rem; /* On force 300px */
    object-fit: cover; /* Indispensable : rogne l'image pour qu'elle ne soit pas écrasée */
    /* object-position: center; /* Centre l'image dans la zone de 300px */
  }

  .new-news {
    padding: 1.5rem 2.5rem;
  }

  .new-news__title {
    font-size: 2.5rem;
    line-height: 40px;
  }
}


/* =========================================
   RESET POUR DESKTOP (À partir de 1440px)
   C'est ici que tout bascule en mode "Site Bureau"
   ========================================= */
@media (width >= 64em) {
  /* --- DESKTOP (1024px et plus) --- */
  .layout {
    display: block;
    /* On force 1112px sans padding interne */
    max-inline-size: 69.5rem;
    inline-size: min(100% - 4rem, 69.5rem);
    margin-inline: auto;
    padding-inline: 0;
    padding-block: 4rem;
  }

  .primary-header {
    margin-bottom: 3.5rem;
  }

  .primary-header__logo {
    inline-size: 4rem;
    block-size: 2.5rem;
  }

  /* On cache le Hamburger et l'Overlay */
  .nav-toggle,
  .overlay { /* On cache l'overlay sur desktop, au cas où */
    display: none;
  }

  /* Navigation : On la remet à plat (horizontale) */
  /* On annule tout le comportement mobile */
  /* = tout le code qui remet le menu à l'horizontale ... */
  .primary-navigation {
    position: static; /* Revient dans le flux normal */
    transform: none; /* Pas d'animation de glissement */
    transition: none;
    inline-size: auto;
    /* block-size: auto; */
    max-inline-size: none;
    background-color: transparent;
    /* z-index: auto; */
    padding: 0;
    inset: auto;
    visibility: visible;
  }

  .primary-navigation__list {
    flex-direction: row; /* Les liens s'alignent horizontalement */
    /* gap: 2rem; */
    gap: 2.5rem;
  }

  .primary-navigation__item .primary-navigation__link {
    color: var(--navy-600);
    font-size: 0.9375rem;
    font-weight: 400;
    line-height: 26px;
  }

  .primary-navigation__item .primary-navigation__link:hover,
  .primary-navigation__item .primary-navigation__link:active {
    color: var(--red-500);
  }

  /* MISE EN PLACE DE LA GRID SUR main-layout */
  /* Il contient : Hero, Sidebar, et Top-Articles */
  .main-layout {
    display: grid;
    /* 3 colonnes de tailles égales */
    /* Magic Grid (minmax pour éviter l'overflow) */
    grid-template-columns: repeat(3, minmax(0, 1fr));
    /* grid-template-columns: repeat(3, 1fr); */
    /* Espace vertical et horizontal */
    gap: 2rem; 
    align-items: start;
    /* margin-bottom: 4rem; /* Pas besoin */
  }

  /* --- PLACEMENT DES ENFANTS DU MAIN --- */

  /* HERO : Prend les 2 premières colonnes */
  .featured-article {
    margin-block-start: 0;
    grid-column: span 2;
    /* min-width: 0; /* Anti-compression => plus besoin grâce à grid-template-columns: repeat(3, minmax(0, 1fr)); */
  }

  /* SIDEBAR : Prend la dernière colonne */
  .new-news {
    padding: 2rem 1.5rem;
    grid-column: span 1;
    /* min-width: 0; */ /* => plus besoin */
    margin-top: 0;
    height: 100%; /* S'aligne sur la hauteur du Hero */
  }

  /* .featured-article {
    margin-block-start: 4rem;
  } */

  /* Plus besoin de limiter l'image ici, la grille s'en occupe */
  .featured-article__image {
    inline-size: 100%; /* S'adapte à la largeur de l'écran - Prend toute la place dispo... */
    max-inline-size: 100%;
    /* max-inline-size: 1080px;  /* largeur header max */
    /* block-size: 100%; /* S'adapte à la hauteur */
    block-size: 18.75rem;
    object-fit: cover;
    /* object-position: center; */
  }

  /* Layout Hero : On passe en GRID 2 Colonnes */
  /* Magie du Grid : On passe de 1 colonne (auto) à 2 colonnes égales */
  .featured-article__content {
    grid-template-columns: repeat(2, 1fr);
    gap: 2rem; /* On augmente l'espace entre le titre et le texte */
  }

  /* Typo plus grande */
  .featured-article__title {
    font-size: 3.5rem;
  }

  /* Top Articles Interne (3 colonnes) */
  /* TOP ARTICLES : Prend toute la largeur (Ligne suivante) */
  .top-articles {
    grid-column: 1 / -1; /* De la 1ère à la dernière ligne */
    /* min-width: 0; */ /* => plus besoin */
    margin-top: 2rem; /* Espace au-dessus des 3 petits articles */
  }

  .top-articles__list {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2rem;
  }
}


@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}